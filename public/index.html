<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Window-Target" content="_top" />
    <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
    <meta name="application-name" content="Ambassy" />
    <meta name="description" content="A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations. Upload CSV files to display events on a map with Voronoi territories showing Regional Event Ambassador support areas." />
    <meta name="keywords" content="parkrun, ambassadors, regional event ambassadors, event ambassadors, parkrun volunteers, event allocation, parkrun management, running community" />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="Pete Johns" />
    <meta name="theme-color" content="#2b233d" />
    <meta
      name="msapplication-square150x150logo"
      content="https://www.johnsy.com/icons/mstile-150x150.png"
    />
    <meta
      name="msapplication-square310x310logo"
      content="https://www.johnsy.com/icons/mstile-310x310.png"
    />
    <meta
      name="msapplication-square70x70logo"
      content="https://www.johnsy.com/icons/mstile-70x70.png"
    />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta
      name="msapplication-TileImage"
      content="https://www.johnsy.com/icons/mstile-144x144.png"
    />
    <meta
      name="msapplication-wide310x150logo"
      content="https://www.johnsy.com/icons/mstile-310x150.png"
    />
    <meta name="MSSmartTagsPreventParsing" content="TRUE" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="canonical" href="https://www.johnsy.com/ambassy/" />

    <!-- Google Fonts - Atkinson Hyperlegible -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- OpenGraph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Ambassy" />
    <meta property="og:title" content="Ambassy - A tool for parkrun ambassadors" />
    <meta property="og:description" content="A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations. Upload CSV files to display events on a map with Voronoi territories showing Regional Event Ambassador support areas." />
    <meta property="og:url" content="https://www.johnsy.com/ambassy/" />
    <meta property="og:image" content="https://www.johnsy.com/ambassy/ambassy-social-preview.png" />
    <meta property="og:image:alt" content="Ambassy showing parkrun event allocations on a map with Regional Event Ambassador (REA) territories" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:secure_url" content="https://www.johnsy.com/ambassy/ambassy-social-preview.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@johnsyweb" />
    <meta name="twitter:title" content="Ambassy - A tool for parkrun ambassadors" />
    <meta name="twitter:description" content="A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations." />
    <meta name="twitter:image" content="https://www.johnsy.com/ambassy/ambassy-social-preview.png" />
    <meta name="twitter:image:alt" content="Ambassy showing parkrun event allocations on a map with Regional Event Ambassador (REA) territories" />

    <!-- Bluesky -->
    <meta name="bluesky:card" content="summary_large_image" />
    <meta name="bluesky:title" content="Ambassy - A tool for parkrun ambassadors" />
    <meta name="bluesky:description" content="A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations." />
    <meta name="bluesky:image" content="https://www.johnsy.com/ambassy/ambassy-social-preview.png" />

    <!-- Messaging Platform Optimizations -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <link href="https://unpkg.com/leaflet/dist/leaflet.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <link
      href="https://www.johnsy.com/assets/css/colors-dark.css"
      rel="alternate stylesheet"
      title="Dark"
    />
    <link
      href="https://www.johnsy.com/assets/css/colors-light.css"
      rel="stylesheet"
      title="Light"
    />
    <link
      href="https://www.johnsy.com/assets/css/style.css"
      rel="stylesheet"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="https://www.johnsy.com/icons/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="https://www.johnsy.com/icons/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="https://www.johnsy.com/icons/apple-touch-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="https://www.johnsy.com/icons/apple-touch-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="https://www.johnsy.com/icons/apple-touch-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="https://www.johnsy.com/icons/apple-touch-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="https://www.johnsy.com/icons/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="https://www.johnsy.com/icons/apple-touch-icon-76x76.png"
    />
    <link
      rel="Help"
      href="https://www.johnsy.com/about/"
      title="What is the point of this website?"
    />
    <link
      rel="icon"
      type="image/png"
      href="https://www.johnsy.com/icons/favicon-128x128.png"
      sizes="128x128"
    />
    <link
      rel="icon"
      type="image/png"
      href="https://www.johnsy.com/icons/favicon-16x16.png"
      sizes="16x16"
    />
    <link
      rel="icon"
      type="image/png"
      href="https://www.johnsy.com/icons/favicon-196x196.png"
      sizes="196x196"
    />
    <link
      rel="icon"
      type="image/png"
      href="https://www.johnsy.com/icons/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="https://www.johnsy.com/icons/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="shortcut icon"
      title="pajIcon"
      href="https://www.johnsy.com/favicon.ico"
    />
    <link rel="sitemap" type="application/xml" href="https://www.johnsy.com/ambassy/sitemap.xml" />
    <link rel="Start" href="https://www.johnsy.com/" title="Back to the start" />
    <link rel="home" href="https://www.johnsy.com/" />
    <title>Ambassy - A tool for parkrun ambassadors</title>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Person",
          "@id": "https://www.johnsy.com/#person",
          "name": "Pete Johns",
          "alternateName": "paj",
          "url": "https://www.johnsy.com",
          "sameAs": [
            "https://www.johnsy.com/",
            "https://www.johnsy.com/about/",
            "https://namedrop.io/petejohns",
            "https://pronouns.org/he"
          ],
          "pronouns": "he/him/his"
        },
        {
          "@type": "WebSite",
          "@id": "https://www.johnsy.com/ambassy/#website",
          "url": "https://www.johnsy.com/ambassy/",
          "name": "Ambassy",
          "description": "A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations.",
          "inLanguage": "en",
          "publisher": { "@id": "https://www.johnsy.com/#person" },
          "potentialAction": {
            "@type": "SearchAction",
            "target": {
              "@type": "EntryPoint",
              "urlTemplate": "https://www.johnsy.com/ambassy/?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
          }
        },
        {
          "@type": "WebPage",
          "@id": "https://www.johnsy.com/ambassy/#webpage",
          "url": "https://www.johnsy.com/ambassy/",
          "name": "Ambassy - A tool for parkrun ambassadors",
          "isPartOf": { "@id": "https://www.johnsy.com/ambassy/#website" },
          "description": "A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations.",
          "inLanguage": "en",
          "datePublished": "2024-01-01",
          "dateModified": "2026-01-18",
          "primaryImageOfPage": {
            "@type": "ImageObject",
            "url": "https://www.johnsy.com/ambassy/ambassy-social-preview.png",
            "width": 1200,
            "height": 630
          },
          "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {"@type": "ListItem", "position": 1, "name": "johnsy.com", "item": "https://www.johnsy.com/"},
                {"@type": "ListItem", "position": 2, "name": "Ambassy", "item": "https://www.johnsy.com/ambassy/"}
            ]
          }
        },
        {
          "@type": "WebApplication",
          "@id": "https://www.johnsy.com/ambassy/#app",
          "name": "Ambassy",
          "description": "A tool for parkrun Regional Event Ambassadors (REAs) to visualise and manage event allocations. Upload CSV files to display events on a map with Voronoi territories showing Regional Event Ambassador support areas.",
          "url": "https://www.johnsy.com/ambassy/",
          "applicationCategory": "UtilityApplication",
          "operatingSystem": ["Windows", "macOS", "Linux", "Android", "iOS"],
          "browserRequirements": "Requires JavaScript. Works with modern browsers including Chrome, Firefox, Safari, and Edge.",
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
          },
          "author": { "@id": "https://www.johnsy.com/#person" },
          "publisher": { "@id": "https://www.johnsy.com/#person" },
          "image": "https://www.johnsy.com/ambassy/ambassy-social-preview.png",
          "screenshot": "https://www.johnsy.com/ambassy/ambassy-social-preview.png",
          "applicationSuite": "parkrun Ambassador utilities",
          "softwareRequirements": "Modern web browser with JavaScript enabled",
          "featureList": [
            "Upload CSV files for Regional and Event Ambassadors",
            "Visualise events on an interactive Leaflet map",
            "Voronoi territories for Regional Event Ambassadors",
            "Table views for events, ambassadors, prospects, issues, and changes"
          ],
          "datePublished": "2024-01-01",
          "dateModified": "2026-01-18",
          "inLanguage": "en"
        }
      ]
    }
    </script>
  </head>
  <body>
    <header class="app-header">
      <div class="header-content">
        <div class="header-title">
          <h1>Ambassy</h1>
          <p>A tool for parkrun Regional Event Ambassadors</p>
        </div>
        <div class="header-actions">
          <button type="button" id="addProspectButton" title="Add Prospect by Address">üìç Add Prospect</button>
        </div>
      </div>
    </header>

    <main class="app-main">
    <div id="content">
      <div id="introduction">
        <p>
          Ambassy is designed to help parkrun Regional Event Ambassadors (REAs) to
          allocate events.
        </p>
        <p>
          The tool allows you to upload a CSV file containing the names of the
          Event Ambassadors you support and the events they support. These files
          are processed in your browser and no data is sent to any servers. The
          soure code is available on
          <a href="https://github.com/johnsyweb/ambassy">GitHub</a>
          for inspection (and improvements are welcome).
        </p>
        <p>
          The tool will then display the events on a map and in a table. Each
          parkrun event is represented by a marker on the map. The markers are
          coloured according to the Event Ambassador allocated to the event.
          There is a Voronoi layer representing Regional Event Ambassadors. The table
          should be self-explanatory.
        </p>
        <img
          src="ambassy-social-preview.png"
          alt="Screenshot of Ambassy"
          title="Screenshot of Ambassy"
          width="500" height="273"
        />
          <p>
            I found this useful (and a fun programming challenge) as an REA and I
            publish it in the hope you do too.
          </p>

        <div id="upload">
          <h2>Upload CSV Files</h2>
          <h3 id="uploadPrompt">Please upload your files here.</h3>
          <div id="storageWarning" style="display: none; color: #d32f2f; margin-top: 1em; padding: 0.5em; background-color: #ffebee; border-radius: 4px;"></div>
          <p>
            Sample CSV files are provided for you to download, inspect and populate:
            <ul>
              <li><a download="Ambassadors - Regional Ambassadors.csv" href="./Ambassadors - Regional Ambassadors.csv">Regional Event Ambassador (REA)</a></li>
              <li><a download="Ambassadors - Event Ambassadors.csv" href="./Ambassadors - Event Ambassadors.csv"> Event Ambassador (EA)</a></li>
              <li><a download="Ambassadors - Event Teams.csv" href="./Ambassadors - Event Teams.csv"> Event Teams</a></li>
            </ul>
          <input
            type="file"
            title="upload data"
            id="csvFileInput"
            accept=".csv"
            multiple
          />
          <button type="button" id="importButton" title="Open a saved Ambassy file from a colleague">üìÇ Open Saved State</button>
          <input
            type="file"
            title="open saved state"
            id="importFileInput"
            accept=".json"
            style="display: none;"
          />
        </div>
      </div>
    </div>

    <div id="ambassy">
      <div id="mapContainer"></div>

      <div style="margin: 1em 0; display: flex; justify-content: space-between; align-items: center;">
        <div>
          <button type="button" id="exportButtonMap" title="Share your current map and allocations with another ambassador">üì§ Share‚Ä¶</button>
          <button type="button" id="importButtonMap" title="Open a saved Ambassy file from a colleague">üìÇ Open Saved State</button>
          <button type="button" id="addEventAmbassadorButton" title="Add Event Ambassador">üë§ Add Event Ambassador</button>
          <button type="button" id="addRegionalAmbassadorButton" title="Add Regional Ambassador">üë• Add Regional Ambassador</button>
          <button type="button" id="configureCapacityLimitsButton" title="Configure Capacity Limits">üîß Configure Capacity Limits</button>
          <button type="button" id="purgeButton">üóëÔ∏è Purge Data</button>
        </div>
        <button type="button" id="keyboardShortcutsButton" title="Show keyboard shortcuts (Ctrl+/ or ?)">‚å®Ô∏è Keyboard Shortcuts</button>
      </div>

      <div id="reallocationDialog" role="dialog" aria-labelledby="reallocationDialogTitle" aria-modal="true" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2em; border: 2px solid #333; border-radius: 8px; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.3); max-width: 600px; width: 90%;">
        <h2 id="reallocationDialogTitle">Select Recipient</h2>
        <div id="reallocationDialogContent"></div>
        <div style="margin-top: 1em; display: flex; gap: 0.5em; justify-content: flex-end;">
          <button type="button" id="reallocationDialogCancel" style="padding: 0.5em 1em;">‚ùå Cancel</button>
        </div>
      </div>
      <div id="keyboardShortcutsDialog" role="dialog" aria-labelledby="keyboardShortcutsDialogTitle" aria-modal="true" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2em; border: 2px solid #333; border-radius: 8px; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.3); max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
        <h2 id="keyboardShortcutsDialogTitle">Keyboard Shortcuts</h2>
        <div id="keyboardShortcutsDialogContent"></div>
        <div style="margin-top: 1em; display: flex; gap: 0.5em; justify-content: flex-end;">
          <button type="button" id="keyboardShortcutsDialogClose" style="padding: 0.5em 1em;">Close</button>
        </div>
      </div>
      <div id="capacityLimitsDialog" role="dialog" aria-labelledby="capacityLimitsDialogTitle" aria-modal="true" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2em; border: 2px solid #333; border-radius: 8px; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
        <h2 id="capacityLimitsDialogTitle">Configure Capacity Limits</h2>
        <form id="capacityLimitsForm">
          <fieldset>
            <legend>Event Ambassador Limits</legend>
            <label>
              Minimum events:
              <input type="number" id="eventAmbassadorMin" min="0" required aria-required="true" />
            </label>
            <label>
              Maximum events:
              <input type="number" id="eventAmbassadorMax" min="0" required aria-required="true" />
            </label>
          </fieldset>
          <fieldset>
            <legend>Regional Ambassador Limits</legend>
            <label>
              Minimum Event Ambassadors:
              <input type="number" id="regionalAmbassadorMin" min="0" required aria-required="true" />
            </label>
            <label>
              Maximum Event Ambassadors:
              <input type="number" id="regionalAmbassadorMax" min="0" required aria-required="true" />
            </label>
          </fieldset>
          <div id="capacityLimitsError" role="alert" style="color: #d32f2f; margin: 1em 0; display: none;"></div>
          <div style="margin-top: 1em;">
            <button type="submit" id="saveCapacityLimitsButton">‚úÖ Save</button>
            <button type="button" id="cancelCapacityLimitsButton">‚ùå Cancel</button>
          </div>
        </form>
      </div>

      <div id="tabsContainer">
        <div class="tabs" role="tablist">
          <button class="tab-button active" role="tab" aria-selected="true" aria-controls="eventTeamsTab" id="eventTeamsTabButton" tabindex="0">Event Teams</button>
          <button class="tab-button" role="tab" aria-selected="false" aria-controls="eventAmbassadorsTab" id="eventAmbassadorsTabButton" tabindex="-1">Event Ambassadors</button>
          <button class="tab-button" role="tab" aria-selected="false" aria-controls="regionalAmbassadorsTab" id="regionalAmbassadorsTabButton" tabindex="-1">Regional Ambassadors</button>
          <button class="tab-button" role="tab" aria-selected="false" aria-controls="prospectsTab" id="prospectsTabButton" tabindex="-1">Prospects</button>
          <button class="tab-button" role="tab" aria-selected="false" aria-controls="changesLogTab" id="changesLogTabButton" tabindex="-1">Changes Log</button>
          <button class="tab-button" role="tab" aria-selected="false" aria-controls="issuesTab" id="issuesTabButton" tabindex="-1">Issues</button>
        </div>

        <div id="eventTeamsTab" class="tab-content active" role="tabpanel" aria-labelledby="eventTeamsTabButton">
          <table id="eventTeamsTable" border="1">
            <thead>
              <tr>
                <th>Regional Event Ambassador (REA)</th>
                <th>Event Ambassador (EA)</th>
                <th>Event Name</th>
                <th>Event Director(s)</th>
                <th>Coordinates</th>
                <th title="E.g. 1 is 5km, open">Event Series</th>
                <th>Country</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Event team rows will be populated here -->
            </tbody>
          </table>
        </div>

        <div id="eventAmbassadorsTab" class="tab-content" role="tabpanel" aria-labelledby="eventAmbassadorsTabButton" hidden>
          <table id="eventAmbassadorsTable" border="1">
            <thead>
              <tr>
                <th>Regional Ambassador</th>
                <th>Name</th>
                <th>State</th>
                <th>Number of Allocations</th>
                <th>Events Assigned</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Event Ambassador rows will be populated here -->
            </tbody>
          </table>
        </div>

        <div id="regionalAmbassadorsTab" class="tab-content" role="tabpanel" aria-labelledby="regionalAmbassadorsTabButton" hidden>
          <table id="regionalAmbassadorsTable" border="1">
            <thead>
              <tr>
                <th>Name</th>
                <th>State</th>
                <th>Number of Allocations</th>
                <th>Event Ambassadors Supported</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Regional Ambassador rows will be populated here -->
            </tbody>
          </table>
        </div>

        <div id="prospectsTab" class="tab-content" role="tabpanel" aria-labelledby="prospectsTabButton" hidden>
          <div style="margin-bottom: 1em;">
            <button type="button" id="importProspectsButton" title="Import Prospects CSV">üì• Import Prospects</button>
            <input
              type="file"
              title="upload prospects CSV"
              id="prospectsCsvFileInput"
              accept=".csv"
              style="display: none;"
            />
          </div>
          <div id="prospectsImportProgress" style="display: none; margin-bottom: 1em; padding: 1em; border: 1px solid #ccc; border-radius: 4px; background-color: #f9f9f9;">
            <div style="margin-bottom: 0.5em;">
              <strong id="progressStage">Importing prospects...</strong>
            </div>
            <div style="margin-bottom: 0.5em;">
              <span id="progressCurrentEvent"></span>
            </div>
            <div style="display: flex; align-items: center;">
              <progress id="prospectsProgressBar" value="0" max="100" style="flex: 1; margin-right: 1em;"></progress>
              <span id="progressText">0/0</span>
            </div>
          </div>
          <table id="prospectsTable" border="1">
            <thead>
              <tr>
                <th>Prospect Event</th>
                <th>Country</th>
                <th>State</th>
                <th>Prospect ED/s</th>
                <th>Event Ambassador</th>
                <th>Date Made Contact</th>
                <th>Course Found</th>
                <th>Landowner Permission</th>
                <th>Funding Confirmed</th>
                <th>Geocoding Status</th>
                <th>Coordinates</th>
                <th>Ambassador Match</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Prospects rows will be populated here -->
            </tbody>
          </table>
        </div>

        <div id="changesLogTab" class="tab-content" role="tabpanel" aria-labelledby="changesLogTabButton" hidden>
          <table id="changesTable" border="1">
            <thead>
              <tr>
                <th>Change Type</th>
                <th>Event Name</th>
                <th>Original Value</th>
                <th>New Value</th>
                <th>Timestamp</th>
              </tr>
            </thead>
            <tbody>
              <!-- Changes log rows will be populated here -->
            </tbody>
          </table>
        </div>

        <div id="issuesTab" class="tab-content" role="tabpanel" aria-labelledby="issuesTabButton" hidden>
          <table id="issuesTable" border="1">
            <thead>
              <tr>
                <th>Event Name</th>
                <th>Event Ambassador</th>
                <th>Regional Ambassador</th>
                <th>Issue Type</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Issues rows will be populated here -->
            </tbody>
          </table>
        </div>
      </div>

    </div>
    </main>

    <footer class="app-footer">
      <p>
        <strong>Ambassy</strong>
        <a href="https://github.com/johnsyweb/ambassy/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer">v0.0.1</a>
        by
        <a href="https://www.johnsy.com" target="_blank" rel="noopener noreferrer">Pete Johns</a>
        (
        <a href="https://github.com/johnsyweb" target="_blank" rel="noopener noreferrer">@johnsyweb</a>
        )
      </p>
      <p>
        Licensed under MIT. Not officially associated with parkrun. Written by
        parkrun volunteers for parkrun volunteers.
      </p>
    </footer>

    <script src="bundle.js"></script>
  </body>
</html>
