# Implementation Plan: End of Prospect Lifecycle

**Branch**: `012-prospect-goes-live` | **Date**: 2026-01-18 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/012-prospect-goes-live/spec.md`

**Note**: This plan is generated by the `/speckit.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

This feature implements two distinct completion paths for prospects:
1. **Launch**: Mark a prospect as having launched (become a live event), optionally allocate matching event to EA
2. **Archive**: Mark a prospect as archived (not viable), remove from system

The implementation replaces the existing "Remove" button with separate "Launch" and "Archive" buttons, provides event matching during launch, updates EA allocation counts, and logs all transitions. Technical approach leverages existing prospect removal patterns, event search/matching infrastructure, and EA allocation workflows.

## Technical Context

**Language/Version**: TypeScript (strict mode enabled)
**Primary Dependencies**: 
- Existing: EventDetailsMap, EventAmbassadorMap, RegionalAmbassadorMap, ProspectiveEventList
- Utilities: searchEvents (for event matching), assignEventToAmbassador (for event allocation), calculateAllCapacityStatuses (for EA updates)
**Storage**: localStorage via persistProspectiveEvents, persistEventAmbassadors, persistChangesLog
**Testing**: Jest (unit tests for launch/archive logic, integration tests for UI workflows)
**Target Platform**: Modern web browsers (ES6+)
**Project Type**: Single-page web application
**Performance Goals**: Launch/archive action completes in <30 seconds including confirmation and any event selection
**Constraints**: 
- Must preserve existing prospect removal patterns for consistency
- Must support future undo functionality via log structure (not implemented in this feature)
- Must handle missing EAs, missing events gracefully
**Scale/Scope**: 
- Typical prospect list: 10-100 prospects
- Event matching: searches entire eventDetails map (typically 1000-2000 events)
- UI changes: Replace one button with two buttons in Prospects table

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

✅ **Quality Gates**: All code will pass Prettier, ESLint, TypeScript type checking, and tests before commit
✅ **Test-Driven Development**: Tests will be written first for launch/archive functions, following TDD principles
✅ **Atomic Commits**: Each change will be committed with semantic commit messages following Conventional Commits
✅ **Single Responsibility**: Launch and Archive will be separate functions, following existing action patterns
✅ **Accessibility**: Launch/Archive buttons will be keyboard accessible, ARIA labels provided
✅ **Open Source Preference**: Leverages existing open source patterns (no new dependencies required)
✅ **Documentation**: README will be updated to document Launch/Archive functionality
✅ **Production/Test Parity**: Tests will exercise production code directly, no environment-specific branches
✅ **Path Aliases**: All imports will use path aliases (@actions/*, @models/*, etc.)

**Constitution Compliance**: ✅ PASS - All gates met. Feature follows existing patterns and conventions.

## Project Structure

### Documentation (this feature)

```text
specs/012-prospect-goes-live/
├── plan.md              # This file (/speckit.plan command output)
├── spec.md              # Feature specification
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
│   └── launch-archive-contracts.md
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
src/
├── actions/
│   ├── launchProspect.ts              # NEW: Launch prospect logic
│   ├── launchProspect.test.ts         # NEW: Tests for launch
│   ├── archiveProspect.ts             # NEW: Archive prospect logic
│   ├── archiveProspect.test.ts        # NEW: Tests for archive
│   ├── findMatchingEvents.ts          # NEW: Event matching for launch
│   ├── findMatchingEvents.test.ts     # NEW: Tests for event matching
│   ├── populateProspectsTable.ts      # MODIFIED: Replace Remove button with Launch/Archive
│   └── searchEvents.ts                # EXISTING: Event search utilities (reused)

tests/
└── [Tests co-located with source files]
```

**Structure Decision**: Single project structure with actions in `src/actions/` following existing patterns. Launch and Archive are separate actions for single responsibility. Event matching extracted to reusable utility. Tests co-located with source files per project convention.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

No violations - all constitution requirements met.
